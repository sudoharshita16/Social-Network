{% extends "network/layout.html" %}
{% load static %}

{% block body %}

{% if add_info == "all_posts" %}
<div class="border  p-4">
   <form action = "{% url 'create' %}" method="post">
       {% csrf_token %} 
    <div class="form-group w-25">
      <label for="posting">Post</label>
      <textarea type="text"  name ="data" class="form-control"  placeholder="Start jotting..."></textarea>
      
    </div>
    
    <input type="submit" value="Post "class="btn btn-primary btn-sm"></button>
</form>
</div>  
<h2>All Posts</h2>
{% endif %}
{% if add_info == "following_posts" %}
<h2>Followed posts</h2>
   {% if entries|length == 0 %}
      You haven't followed any people yet!
   {% endif %}
{% endif %}

<h3 style="display:none;">{{ids}}</h3>
<i class="far fa-heart"></i>
    <ul>
    {% for entry in entries %}
        <li class="list-group-item">
            By <a href="{% url 'profile' entry.user.id %}"><strong>{{entry.user}}</strong></a><br>
              <div class="view_one">
                <div class = "para" >{{entry.data}}</div>
                <div id ="{{entry.id}}">
                  {{entry.likers.count}}
                </div>
                
                {% if userobj in entry.likers.all %}
                <form class= "likeunlike">
                    <div style="display: block;"  class="two" id={{entry.id}}>
                      {% csrf_token %}
                      <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                      <input type="hidden" class="liked" name="liked" value="no">
                      <button class="unlikebuttonsmall"  type="submit" class="btn btn-outline-danger" btn btn-primary btn-sm>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 4.419c-2.826-5.695-11.999-4.064-11.999 3.27 0 7.27 9.903 10.938 11.999 15.311 2.096-4.373 12-8.041 12-15.311 0-7.327-9.17-8.972-12-3.27z"/></svg>
                        Unlike<form class= "unlike"></form>
                      </button>
                    </div>

                    <div style="display: none;" class="one" id={{entry.id}}>
                      {% csrf_token %}
                      <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                        <button class="likebuttonsmall"  type="submit" class="btn btn-outline-danger" btn btn-primary btn-sm>
                          <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"/></svg>
                          Like
                        </button>
                    </div>
                </form>
    {% else %}
                
                <form class="likeunlike">
                    
                    <div style="display: block;" class="one" id={{entry.id}}>
                      {% csrf_token %}
                        <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                        <input type="hidden" class="liked" name="liked" value="yes">
                        <button class="likebuttonsmall"  type="submit" class="btn btn-outline-danger" btn btn-primary btn-sm>
                          <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"/></svg>
                          Like
                        </button>
                    </div>
                    <div style="display: none;" class="two" id={{entry.id}} >
                      <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                      <button class="unlikebuttonsmall"  type="submit" class="btn btn-outline-danger" btn btn-primary btn-sm>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 4.419c-2.826-5.695-11.999-4.064-11.999 3.27 0 7.27 9.903 10.938 11.999 15.311 2.096-4.373 12-8.041 12-15.311 0-7.327-9.17-8.972-12-3.27z"/></svg>
                        Unlike
                      </button>
                    </div>
                    
                </form>
                
                {% endif %}
                 
                On {{entry.time}}
                <br>
                {% if entry.user.id == request.user.id %}
                  <form class="EDIT">
                    {% csrf_token %}
                    <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                    <input type="submit" value="Edit" class="btn btn-primary btn-sm"></button>
                  </form>
               
                {% endif %}
            </div>
            <div style="display: none;" class="view_two">
              <form class="edit">
                {% csrf_token %} 
                <div class="form-group w-25">
                  <label for="posting">Post</label>
                  <input type="hidden" class="entry_id" name="entry_id" value="{{entry.id}}">
                  <textarea type="text"  name ="data"  class="form-control" >{{entry.data}}</textarea>
                </div>
                <input type="submit" value="Post" class="btn btn-primary btn-sm"></button>
              </form>
            </div>  
          
            
            
        </li>
    {% endfor %}
  </ul>

{% endblock %}

{% block script %}
    <script  src="{% static 'network/like.js' %}"></script>
{% endblock %}